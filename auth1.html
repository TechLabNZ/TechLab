<!DOCTYPE html>
<html>
<head>
    <title>Sign In - NCEA Excellence</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js"></script>

    <style>
        /* Styles remain unchanged */
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-tabs">
            <button class="tab-btn active" onclick="showTab('signin')">Sign In</button>
            <button class="tab-btn" onclick="showTab('signup')">Sign Up</button>
        </div>

        <form id="signinForm" class="auth-form">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" required>
            </div>
            <button type="submit" class="submit-btn">Sign In</button>
        </form>

        <form id="signupForm" class="auth-form" style="display: none;">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="signupEmail">Email</label>
                <input type="email" id="signupEmail" required>
            </div>
            <div class="form-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" required>
            </div>
            <button type="submit" class="submit-btn">Create Account</button>
        </form>
    </div>

    <script type="module">
        // Initialize Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB34qqnmqKbpW_pgCIHQJaWqXBvZo_nV7U",
            authDomain: "nceatutor-6a0b8.firebaseapp.com",
            projectId: "nceatutor-6a0b8",
            storageBucket: "nceatutor-6a0b8.appspot.com",
            messagingSenderId: "187738507048",
            appId: "1:187738507048:web:f76c6cc43333739ac7f21d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Handle Sign Up
        document.getElementById("signupForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const name = document.getElementById("name").value;
            const email = document.getElementById("signupEmail").value;
            const password = document.getElementById("signupPassword").value;

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Store user data in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    name: name,
                    email: email,
                    uid: user.uid
                });

                alert("Account created successfully!");
            } catch (error) {
                showError(error.message);
            }
        });

        // Handle Sign In
        document.getElementById("signinForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            try {
                await signInWithEmailAndPassword(auth, email, password);
                alert("Sign-in successful!");
            } catch (error) {
                showError(error.message);
            }
        });

        // Toggle Tabs
        function showTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.style.display = 'none');

            if (tab === 'signin') {
                document.getElementById('signinForm').style.display = 'block';
                document.querySelector('.tab-btn:first-child').classList.add('active');
            } else {
                document.getElementById('signupForm').style.display = 'block';
                document.querySelector('.tab-btn:last-child').classList.add('active');
            }
        }

        // Show Error Message
        function showError(message) {
            alert(message);
        }
    </script>
</body>
</html>